<div align="center">
  
# 1 用法

[**English**](./usage.md) | [**中文**](./usage_zh_CN.md)

</div>

## 1.1 下载和运行

前往 [下载页面](https://github.com/WisteFinch/Helldivers2CallForStratagemsOnPhone/releases/latest) ，选择最新版本。

### 1.1.1 电脑端-服务器

- 下载并运行 `call-for-stratagem-server-x.x.x.exe`，系统至少为Windows 10 x64（更低的我没试过）。
- 如需Linux/Mac版，请参照 [构建](./README_zh_CN.md#构建) 条目自行编译。

### 1.1.2 手机端-客户端

- 下载并安装 `call-for-stratagem-client-x.x.x.apk`，系统至少为安卓8.0。

## 1.2 连接

### 1.2.1 连接和测试

1. 确保手机和电脑处于统一网络下，网络连接通畅
2. 打开服务器，待启动成功后记录显示的IP和端口信息。如 `监听：192.169.1.2:23333`，此时IP为 `192.168.1.2`，端口为 `23333`
3. 打开客户端，转到 `设置>连接` 部分
    - 手动设置：将记录的IP和端口信息填入输入框中
    - 扫描二维码：点击 `扫描二维码` 按钮，拍摄电脑端显示的二维码，会自动获取配置
4. 点击测试按钮 `测试连接` 按钮，如提示 `成功` 则可以使用
    - `v0.3.0` 后加入了认证功能，以防止恶意攻击：首次或间隔三天连接时，服务器会要求用户确认连接，显示 `认证请求自：XXX，sid：XX 是否允许认证该客户端？(Y/N)`，此时输入 `Y` 即可接受请求

## 1.3 配置

`v0.3.0` 后应用配置需要手动确认，以防止恶意攻击：点击 `应用配置` 按钮后，服务器会显示 `同步请求自：XXX 是否允许同步配置？(Y/N)`，此时输入 `Y` 即可接受请求

### 1.3.1 修改端口

建议只在端口被占用时修改此值

1. 打开服务器，确保客户端能正常连接服务器
2. 打开客户端，转到 `设置>同步>端口`，修改为 `1~65535` 的任意数值
3. 点击下方 `应用配置` 按钮，然后重新打开服务器

### 1.3.2 修改按键速度

此数值为呼叫战备时按下两个按键间的延迟，会影响到一键输入（宏）、正常输入的执行速度，如果电脑帧率过低导致呼叫失败，可以尝试增加此数值

1. 打开服务器，确保客户端能正常连接服务器
2. 打开客户端，转到 `设置>同步>输入延迟`，修改为想要的数值（单位为毫秒，默认25）
3. 点击下方 `应用配置` 按钮，然后重新打开服务器

### 1.3.3 修改按键映射

1. 打开服务器，确保客户端能正常连接服务器
2. 打开客户端，转到 `设置>同步`
3. 打开 `输入：XXX`，修改为想要的按键
4. 点击下方 `应用配置` 按钮，然后重新打开服务器

## 1.4 控制

### 1.4.1 启用精简模式

该功能于 `v0.2.1` 加入：精简模式只保留一键输入（宏）功能，并去除大部分装饰，为仅需宏功能的用户制作

1. 打开客户端，转到 `设置>控制>启用精简控制`，点击切换开关

### 1.4.2 调整滑动手势灵敏度

如果使用正常输入功能时，遇到难以识别滑动手势的情况，可以适当调低此数值

1. 打开客户端，转到 `设置>控制`
2. 调整 `手势距离阈值`（单位为像素，默认100），此值代表了能被识别的最低手势滑动距离
3. 调整 `手势速度阈值`（单位为像素每秒，默认100），此值代表了能被识别的最低手势滑动速度

## 1.5 组合

### 1.5.1 创建组合

组合是一组用户自选的战略配备，建议为不同的战斗准备对应的组合，有利于战斗时快速选定需要的战备

1. 打开客户端，点击主界面右下角的加号（`＋`）按钮
2. 此时进入 `编辑组合` 界面，为组合取一个合适的名称，然后在下方的列表处勾选需要的战备
3. 点击右上角保存按钮，保存组合

### 1.5.2 编辑组合

1. 打开客户端，点击想要编辑的组合，此时进入 `浏览组合` 界面
2. 点击右上角 `...` 按钮，在弹出菜单中点击 `编辑`
3. 此时进入 `编辑组合` 界面，可以修改组合名称，在下方的列表处勾选需要的战备
4. 点击右上角保存按钮，保存组合

### 1.5.2 删除组合

此操作不可恢复，请谨慎选择

1. 打开客户端，点击想要编辑的组合，此时进入 `浏览组合` 界面
2. 点击右上角 `...` 按钮，在弹出菜单中点击 `删除`

## 1.6 播放

### 1.6.1 开始播放组合

1. 打开客户端，点击想要播放的组合，此时进入 `浏览组合` 界面
2. 点击右下角播放（`▶`）按钮，此时进入 `播放` 界面
3. 此界面中，左上角为 `退出` 按钮、右上角为 `自由输入模式` 按钮、右侧为 `战备栏`、左下为 `连接状态`、中部为 `信息区`
    - 正常输入：当在 `战备栏` 选定一个战备后，`信息区` 会显示战备信息，并启用手势输入。需要按提示滑动才能激活战备
    - 一键输入（宏）：向左滑动战备图标，立即激活战备
    - 自由输入：点击 `自由输入模式` 按钮来启用，适用于操作终端等随机输入的情况，如要在此功能下呼叫战备，需手动按下游戏中的 `打开战略配备` 键
    - `连接状态` 指示了当前与服务器的通信情况，绿色为成功，黄色为连接中，红色为连接失败。失败时，如尝试激活战备，则会立即重新尝试连接

### 1.6.2 精简模式

该功能于 `v0.2.1` 加入：精简模式只保留一键输入（宏）功能，并去除大部分装饰，为仅需宏功能的用户制作

1. 参照 [1.4.1-启用精简模式](#141-启用精简模式)，打开此模式
2. 进入 `播放` 界面，此时只剩下战备图标和 `连接状态`，点击图标即可激活战备

# 2 常见问题

## 2.1 连接

### 2.1.1 客户端无法连接到服务器

1. 手机和电脑都必须在同一个网络下。校园网和企业网可能会开启ap隔离，使设备之间无法互相发现，建议换个网络或者使用热点
2. 检查服务器地址和端口有没有填对
3. 关闭网络代理和VPN（不需要关闭加速器），禁用虚拟网卡
4. 检查防火墙，方法如下
    - 按win加s键打开自带的搜索功能，搜索 `防火墙`
    - 打开 `高级安全Windows Defender防火墙`
    - 选择 `入站规则`，在右侧找到`call for stratagem server`
    - 选定后点 `属性`，勾选 `允许连接`
    - 转到 `高级` 一栏，勾选 `域`、`专用` 和 `公有`，然后点 `确定`
5. 重启电脑试试
